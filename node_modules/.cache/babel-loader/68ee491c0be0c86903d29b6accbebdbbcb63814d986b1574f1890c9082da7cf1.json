{"ast":null,"code":"import _regeneratorRuntime from\"E:/react_mongodb/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/react_mongodb/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/react_mongodb/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import Navbare from'./Navbare';import{useState,useEffect}from'react';import Button from'react-bootstrap/Button';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Card from'react-bootstrap/Card';import axios from'axios';import Form from'react-bootstrap/Form';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Accueil=function Accueil(){var userId=sessionStorage.getItem('userId');var username=sessionStorage.getItem('username');var _useState=useState(0),_useState2=_slicedToArray(_useState,2),like=_useState2[0],setLike=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),liked=_useState4[0],setLiked=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedImage=_useState6[0],setSelectedImage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),pub=_useState8[0],setPub=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),pubs=_useState10[0],setPubs=_useState10[1];var mampiakatra=function mampiakatra(){if(liked){return;}setLike(like+1);setLiked(true);};useEffect(function(){afficherPub();},[pub]);var afficherPub=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post('http://localhost:8000/makapub');case 3:response=_context.sent;setPubs(response.data);console.log(pubs);pubs.map(function(p){console.log(p.sender_id);});console.log(pubs[0].sender_id);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error(\"Erreur lors de la récupération de la publication :\",_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function afficherPub(){return _ref.apply(this,arguments);};}();var publier=function publier(e){e.preventDefault();console.log(pub);try{axios.post('http://localhost:8000/publication',{pub:pub,sender_id:userId}).then(function(response){setPub(\"\");if(response.data.success){toast.success('Bien publiée',{position:\"top-center\",autoClose:2000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\"});}}).catch(function(){});}catch(error){}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'100px'}}),/*#__PURE__*/_jsx(Navbare,{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Cr\\xE9er une publication\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"textarea\",{value:pub,onChange:function onChange(e){return setPub(e.target.value);},rows:\"4\",cols:\"50\",placeholder:\"Exprimez-vous...\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:publier,children:\"Publier\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',minHeight:'100vh'},children:pubs.map(function(pubs){return/*#__PURE__*/_jsxs(Card,{style:{margin:'10px'},children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Publication\"}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Card.Title,{children:[\"Special title treatment\",pubs.sender_id]}),/*#__PURE__*/_jsxs(Card.Text,{children:[pubs.texte,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:4})]}),/*#__PURE__*/_jsxs(Button,{variant:\"primary\",disabled:liked,onClick:mampiakatra,children:[\"LIke \",like]}),\"     \",/*#__PURE__*/_jsx(Button,{variant:\"primary\",children:\"Comment \"})]})]},pubs.id);})})]});};export default Accueil;","map":{"version":3,"names":["React","Navbare","useState","useEffect","Button","ToastContainer","toast","Card","axios","Form","jsx","_jsx","jsxs","_jsxs","Accueil","userId","sessionStorage","getItem","username","_useState","_useState2","_slicedToArray","like","setLike","_useState3","_useState4","liked","setLiked","_useState5","_useState6","selectedImage","setSelectedImage","_useState7","_useState8","pub","setPub","_useState9","_useState10","pubs","setPubs","mampiakatra","afficherPub","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","post","sent","data","console","log","map","p","sender_id","t0","error","stop","apply","arguments","publier","e","preventDefault","then","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","catch","children","style","marginTop","value","onChange","target","rows","cols","placeholder","type","accept","onClick","display","flexDirection","alignItems","minHeight","margin","Header","Body","Title","Text","texte","Control","as","variant","disabled","id"],"sources":["E:/react_mongodb/frontend/src/pages/Accueil.js"],"sourcesContent":["import React from 'react';\r\nimport Navbare from './Navbare';\r\nimport { useState, useEffect } from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Card from 'react-bootstrap/Card';\r\nimport axios from 'axios';\r\nimport Form from 'react-bootstrap/Form';\r\nconst Accueil = () => {\r\n\r\n\r\n    const userId = sessionStorage.getItem('userId');\r\n    const username = sessionStorage.getItem('username');\r\n    const [like, setLike] = useState(0);\r\n    const [liked, setLiked] = useState(false);\r\n\r\n    const [selectedImage, setSelectedImage] = useState(null);\r\n    const [pub, setPub] = useState(\"\");\r\n    const [pubs, setPubs] = useState([]);\r\n\r\n\r\n\r\n    const mampiakatra = () => {\r\n        if (liked) {\r\n            return;\r\n\r\n        }\r\n        setLike(like + 1);\r\n        setLiked(true)\r\n    }\r\n\r\n    useEffect(() => {\r\n        afficherPub();\r\n    }, [pub]);\r\n\r\n    const afficherPub = async () => {\r\n        try {\r\n            const response = await axios.post('http://localhost:8000/makapub');\r\n     \r\n            setPubs(response.data);\r\n            console.log(pubs);\r\n            pubs.map((p) => {\r\n                console.log(p.sender_id);\r\n            }\r\n            )\r\n            console.log(pubs[0].sender_id);\r\n        } catch (error) {\r\n            console.error(\"Erreur lors de la récupération de la publication :\", error);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    const publier = (e) => {\r\n\r\n        e.preventDefault();\r\n        console.log(pub);\r\n        try {\r\n            axios.post('http://localhost:8000/publication', {\r\n                pub: pub,\r\n                sender_id: userId\r\n            }).then((response) => {\r\n                setPub(\"\")\r\n                if (response.data.success) {\r\n                    toast.success('Bien publiée', {\r\n                        position: \"top-center\",\r\n                        autoClose: 2000,\r\n                        hideProgressBar: false,\r\n                        closeOnClick: true,\r\n                        pauseOnHover: true,\r\n                        draggable: true,\r\n                        progress: undefined,\r\n                        theme: \"light\",\r\n                    });\r\n                }\r\n\r\n            }).catch(() => {\r\n\r\n            })\r\n        } catch (error) {\r\n\r\n        }\r\n\r\n    }\r\n    return (\r\n        <div>\r\n            <div style={{ marginTop: '100px' }}></div>\r\n            <Navbare />\r\n            <div>\r\n                <h2>Créer une publication</h2>\r\n                <form>\r\n                    <textarea value={pub} onChange={(e) => setPub(e.target.value)} rows=\"4\" cols=\"50\" placeholder=\"Exprimez-vous...\"></textarea>\r\n\r\n                    <br />\r\n                    <input type=\"file\" accept=\"image/*\" />\r\n                    <br />\r\n                    <br />\r\n                    <button onClick={publier}>Publier</button>\r\n                </form>\r\n            </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n            <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', minHeight: '100vh' }}>\r\n                {pubs.map((pubs) => (\r\n\r\n\r\n                    <Card key={pubs.id} style={{ margin: '10px' }}>\r\n                        <Card.Header>Publication</Card.Header>\r\n                        <Card.Body>\r\n                            <Card.Title>Special title treatment{pubs.sender_id}</Card.Title>\r\n                            <Card.Text>\r\n                                {pubs.texte} <br />\r\n                                <Form.Control as=\"textarea\" rows={4} />\r\n\r\n                            </Card.Text>\r\n                            <Button variant=\"primary\" disabled={liked} onClick={mampiakatra}>LIke {like}</Button>     <Button variant=\"primary\">Comment </Button>\r\n                        </Card.Body>\r\n                    </Card>\r\n\r\n                ))}\r\n\r\n            </div>\r\n\r\n\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Accueil;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}