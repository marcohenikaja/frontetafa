{"ast":null,"code":"import _regeneratorRuntime from\"E:/react_mongodb/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/react_mongodb/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/react_mongodb/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import\"bootstrap/dist/css/bootstrap.min.css\";import{Container,Row,Col,Form,Button}from\"react-bootstrap\";import{FaInstagram}from\"react-icons/fa\";import{ToastContainer,toast}from'react-toastify';import Create from\"./Create\";import Message from\"./Message\";import'react-toastify/dist/ReactToastify.css';import Navbare from\"./Navbare\";import axios from\"axios\";import{NavLink}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loggedIn=_useState6[0],setLoggedIn=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),anarana=_useState8[0],setAnarana=_useState8[1];var connexion=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req,res){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:data={username:username,password:password};if(!(data.username==\"\"||data.password==\"\")){_context.next=6;break;}toast.error('Veuillez remplir les champs vides',{position:\"top-center\",autoClose:2000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\"});return _context.abrupt(\"return\");case 6:_context.prev=6;_context.next=9;return axios.post('http://localhost:8000/login',data).then(function(response){console.log(response.data);if(response.data.success){toast.success('Vous etes connecte',{position:\"top-center\",autoClose:2000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\"});var userId=response.data.userId;var nom=response.data.username;console.log(nom);sessionStorage.setItem('userId',userId);sessionStorage.setItem('username',nom);window.location.href='./Navbare';}else{toast.error('Mot de passe ou Login invalide',{position:\"top-center\",autoClose:2000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\"});}}).catch(function(err){console.log(err);});case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](6);toast.error('Nom d\\'utilisateur ou mot de passe incorrect',{position:\"top-center\",autoClose:2000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\"});case 14:case\"end\":return _context.stop();}},_callee,null,[[6,11]]);}));return function connexion(_x,_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"bg-light min-vh-100 d-flex flex-column\",children:[/*#__PURE__*/_jsx(Row,{className:\"flex-grow-1\",children:/*#__PURE__*/_jsxs(Col,{md:{span:4,offset:4},className:\"my-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border rounded p-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"ml-2\",style:{color:'maroon'},children:\"E-Tafa\"})}),/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(Form.Group,{controlId:\"formBasicEmail\",children:/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",placeholder:\"Nom d'utilisateur\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"formBasicPassword\",children:/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"password\",placeholder:\"Mot de passe\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{onClick:connexion,variant:\"primary\",className:\"w-100 mt-3\",children:\"Se connecter\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 text-center\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Mot de passe oubli\\xE9 ?\"})})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{className:\"text-center mt-3\",children:[\"Vous n'avez pas de compte ? \",/*#__PURE__*/_jsx(NavLink,{to:\"/inscription\",style:{color:'black',fontSize:'20px',textDecoration:'none',borderBottom:'none',marginRight:'35px'},children:\"Inscrivez-vous\"})]})})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});}export default Login;","map":{"version":3,"names":["React","useState","Container","Row","Col","Form","Button","FaInstagram","ToastContainer","toast","Create","Message","Navbare","axios","NavLink","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","loggedIn","setLoggedIn","_useState7","_useState8","anarana","setAnarana","connexion","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","req","res","data","wrap","_callee$","_context","prev","next","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","abrupt","post","then","response","console","log","success","userId","nom","sessionStorage","setItem","window","location","href","catch","err","t0","stop","_x","_x2","apply","arguments","children","fluid","className","md","span","offset","style","color","Group","controlId","Control","required","type","placeholder","value","onChange","e","target","onClick","variant","to","fontSize","textDecoration","borderBottom","marginRight"],"sources":["E:/react_mongodb/frontend/src/pages/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { Container, Row, Col, Form, Button } from \"react-bootstrap\";\r\nimport { FaInstagram } from \"react-icons/fa\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport Create from \"./Create\";\r\nimport Message from \"./Message\";\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Navbare from \"./Navbare\";\r\nimport axios from \"axios\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nfunction Login() {\r\n    const [username, setUsername] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n\r\n    const [loggedIn, setLoggedIn] = useState(false);\r\n    const [anarana, setAnarana] = useState(null);\r\n\r\n    const connexion = async (req, res) => {\r\n        const data = { username, password };\r\n        if (data.username == \"\" || data.password == \"\") {\r\n            toast.error('Veuillez remplir les champs vides', {\r\n                position: \"top-center\",\r\n                autoClose: 2000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n                theme: \"light\",\r\n            });\r\n            return;\r\n        }\r\n        else {\r\n\r\n            try {\r\n                await axios.post('http://localhost:8000/login', data)\r\n                    .then((response) => {\r\n                        console.log(response.data);\r\n                        if (response.data.success) {\r\n                            toast.success('Vous etes connecte', {\r\n                                position: \"top-center\",\r\n                                autoClose: 2000,\r\n                                hideProgressBar: false,\r\n                                closeOnClick: true,\r\n                                pauseOnHover: true,\r\n                                draggable: true,\r\n                                progress: undefined,\r\n                                theme: \"light\",\r\n                            });\r\n                            const userId = response.data.userId;\r\n                            const nom = response.data.username;\r\n                            console.log(nom);\r\n                            sessionStorage.setItem('userId', userId);\r\n                            sessionStorage.setItem('username', nom);\r\n                            window.location.href = './Navbare';\r\n\r\n\r\n                        } else {\r\n                            toast.error('Mot de passe ou Login invalide', {\r\n                                position: \"top-center\",\r\n                                autoClose: 2000,\r\n                                hideProgressBar: false,\r\n                                closeOnClick: true,\r\n                                pauseOnHover: true,\r\n                                draggable: true,\r\n                                progress: undefined,\r\n                                theme: \"light\",\r\n                            });\r\n                        }\r\n                    }).catch((err) => {\r\n                        console.log(err);\r\n                    })\r\n            } catch (error) {\r\n                toast.error('Nom d\\'utilisateur ou mot de passe incorrect', {\r\n                    position: \"top-center\",\r\n                    autoClose: 2000,\r\n                    hideProgressBar: false,\r\n                    closeOnClick: true,\r\n                    pauseOnHover: true,\r\n                    draggable: true,\r\n                    progress: undefined,\r\n                    theme: \"light\",\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Container fluid className=\"bg-light min-vh-100 d-flex flex-column\">\r\n                <Row className=\"flex-grow-1\">\r\n                    <Col md={{ span: 4, offset: 4 }} className=\"my-auto\">\r\n                        <div className=\"bg-white border rounded p-5\">\r\n                            <div className=\"d-flex align-items-center\">\r\n\r\n                                <h1 className=\"ml-2\" style={{ color: 'maroon' }}>\r\n                                    E-Tafa\r\n                                </h1>\r\n                            </div>\r\n                            <Form>\r\n                                <Form.Group controlId=\"formBasicEmail\">\r\n                                    <Form.Control\r\n                                        required\r\n                                        type=\"text\"\r\n                                        placeholder=\"Nom d'utilisateur\"\r\n                                        value={username}\r\n                                        onChange={(e) => setUsername(e.target.value)} />\r\n\r\n                                </Form.Group>\r\n                                <br />\r\n                                <Form.Group controlId=\"formBasicPassword\">\r\n                                    <Form.Control\r\n                                        required\r\n                                        type=\"password\"\r\n                                        placeholder=\"Mot de passe\"\r\n                                        value={password}\r\n                                        onChange={(e) => setPassword(e.target.value)}\r\n\r\n                                    />\r\n\r\n                                </Form.Group>\r\n                                <br />\r\n                                <Button onClick={connexion} variant=\"primary\" className=\"w-100 mt-3\">\r\n                                    Se connecter\r\n                                </Button>\r\n                            </Form>\r\n                        </div>\r\n                        <div className=\"mt-3 text-center\">\r\n                            <a href=\"/\">Mot de passe oublié ?</a>\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col className=\"text-center mt-3\">\r\n                        Vous n'avez pas de compte ? <NavLink\r\n                            to=\"/inscription\"\r\n                            style={{ color: 'black', fontSize: '20px', textDecoration: 'none', borderBottom: 'none', marginRight: '35px' }}\r\n                        >Inscrivez-vous</NavLink>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n\r\n            <ToastContainer />\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}